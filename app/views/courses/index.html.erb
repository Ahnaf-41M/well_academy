<div class="container">

  <p class="card card-header fw-bold h1 text-center mb-1"><%= t('courses.header.title') %></p>

  <div class="table-responsive">
    <table class="table table-striped table-hover">

      <% if @courses.any? %>
        <tr class="h5">
          <th scope="col"><%= t('courses.index.title') %></th>
          <th scope="col" class="d-none d-md-table-cell"><%= t('courses.index.teacher') %></th>
          <th scope="col" class="d-none d-lg-table-cell"><%= t('courses.index.category') %></th>
          <th scope="col" class="d-none d-sm-table-cell"><%= t('courses.index.price') %></th>
          <th scope="col"><%= t('courses.index.actions') %></th>
        </tr>

        <% @courses.each do |tmp_course| %>
          <tr>
            <td class="h6">
              <%= tmp_course.title.titleize %>
              <!-- Show additional info on mobile -->
              <div class="d-md-none small text-muted mt-1">
                <div><strong><%= t('courses.index.teacher') %>:</strong> <%= tmp_course.teacher.name %></div>
                <div class="d-sm-none"><strong><%= t('courses.index.price') %>:</strong> <%= tmp_course.price %> $</div>
                <div class="d-lg-none"><strong><%= t('courses.index.category') %>:</strong> <%= tmp_course.category.name %></div>
              </div>
            </td>
            <td class="h6 d-none d-md-table-cell"><%= tmp_course.teacher.name %></td>
            <td class="h6 d-none d-lg-table-cell"><%= tmp_course.category.name %></td>
            <td class="h6 d-none d-sm-table-cell"><%= tmp_course.price %> $</td>
            <td class="h6">
              <!-- Desktop view - show all buttons -->
              <div class="btn-toolbar d-none d-md-flex" role="group" aria-label="Course actions">
                <%= link_to t('view_button'),
                            course_path(tmp_course),
                            class: "btn btn-sm btn-primary me-2"
                %>
                <%= link_to t('edit_button'),
                            edit_course_path(tmp_course),
                            class: "btn btn-sm btn-warning me-2"
                %>
                <%= button_to t('delete_button'),
                              course_path(tmp_course),
                              method: :delete,
                              class: "btn btn-sm btn-danger me-2",
                              onclick: "return confirm('#{t('confirm_message')}');"
                %>
                <%= link_to t('reviews.index.title'),
                            course_reviews_path(tmp_course),
                            class: "btn btn-outline-dark btn-sm me-2"
                %>
              </div>

              <!-- Mobile view - dropdown menu -->
              <div class="dropdown d-md-none">
               <span class="btn btn-sm btn-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                  <%= t("dropdown.options.title") %>
                </span>
                <ul class="dropdown-menu">
                  <li>
                    <%= link_to t('view_button'),
                                course_path(tmp_course),
                                class: "dropdown-item"
                    %>
                  </li>
                  <li>
                    <%= link_to t('edit_button'),
                                edit_course_path(tmp_course),
                                class: "dropdown-item"
                    %>
                  </li>
                  <li>
                    <%= link_to t('reviews.index.title'),
                                course_reviews_path(tmp_course),
                                class: "dropdown-item"
                    %>
                  </li>
                  <li><hr class="dropdown-divider"></li>
                  <li>
                    <%= button_to t('delete_button'),
                                  course_path(tmp_course),
                                  method: :delete,
                                  class: "dropdown-item text-danger",
                                  onclick: "return confirm('#{t('confirm_message')}');",
                                  form: { style: "display: inline;" }
                    %>
                  </li>
                </ul>
              </div>
            </td>
          </tr>
        <% end %>
      <% else %>
        <tr>
          <td colspan="5">
            <div class="alert alert-warning text-center" role="alert">
              <h4 class="text-danger"><%= t('courses.index.no_courses') %></h4>
            </div>
          </td>
        </tr>
      <% end %>
    </table>
  </div>
  
  <nav class="d-flex justify-content-center">
    <%= paginate @courses, theme: 'bootstrap4'%>
  </nav>
</div>